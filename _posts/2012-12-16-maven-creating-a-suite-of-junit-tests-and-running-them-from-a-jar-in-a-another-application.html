---
layout: post
title: 'Maven: Creating a suite of JUnit tests and running them from a jar in a another
  application'
date: 2012-12-16 21:40:15.000000000 +01:00
type: post
published: true
status: publish
categories:
- Java
- Maven
tags: []
meta:
  _edit_last: '1'
author:
  login: michael
  email: thelinmichael@gmail.com
  display_name: michael
  first_name: ''
  last_name: ''
---
<p>I've spent a part of the day struggling with the what should be concidered best practice when wanting to run a Maven built suite of JUnit tests in another project.</p>
<p>Say that you want to test an application. You create a Maven project to be a master project, that uses other Maven built projects filled with tests as dependencies. How would you structure and compile the test projects, and how would you drag them into the master project?</p>
<p>I started out by creating my JUnit tests, placing them in the <strong>/src/test/java</strong> folder, and compiling them using the <a title="http://maven.apache.org/plugins/maven-jar-plugin/" href="http://maven.apache.org/plugins/maven-jar-plugin/">maven-jar plugin</a>. That would create a <strong>&lt;artifactId&gt;-&lt;version&gt;-tests.jar</strong> containing all the tests classes.  After setting the master project to use the test jar file as a dependency, I still found myself unable to run the tests as the test project's dependencies were missing. No transitive dependencies are downloaded by the master project. <a title="http://jira.codehaus.org/browse/MNG-1378" href="http://jira.codehaus.org/browse/MNG-1378">Other people</a> seemed to have the same issue.</p>
<p>You could solve this by adding all the test project's dependencies in the master project, but that's not a good solution. Instead, as recommended by Apache <a title="http://maven.apache.org/plugins/maven-jar-plugin/usage.html" href="http://maven.apache.org/plugins/maven-jar-plugin/usage.html">here</a> (scroll to "the preferred way" close to the bottom of the page):</p>
<ol>
<li>Create a new Maven project.</li>
<li>Copy all tests and test resources to the /src/main/java/ and /src/main/resources/ folders.</li>
<li>Copy the dependencies but remove the test scope.</li>
<li>mvn install.</li>
</ol>
<p>In the master project, you'd simply add the new project's artifactId and other information, but in <strong>test scope</strong>.</p>
<p>After doing this, you'll be able to to run the jar file as JUnit tests without any problems with transitive dependencies.</p>
